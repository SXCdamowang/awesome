<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>密码大师</title><style>body{font-family:Arial,sans-serif;margin:20px;background-color:black;color:white}.container{max-width:800px;margin:auto}.input-group{margin-bottom:15px}label{display:block;margin-bottom:5px}input,select,button{width:100%;padding:10px;margin-bottom:10px;background-color:#333;color:white;border:1px solid #555}button{background-color:#4CAF50;color:white;border:none;cursor:pointer}button:hover{background-color:#45a049}.result{margin-top:20px;padding:10px;background-color:#222;border:1px solid #444;position:relative;overflow-wrap:break-word;word-wrap:break-word;word-break:break-all}.icon-button{background:none;border:none;color:#4CAF50;font-size:16px;cursor:pointer;padding:0;margin-left:5px;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.icon-button:hover{color:#45a049}.method-group{display:flex;align-items:center;gap:5px}.result-group{display:flex;align-items:center;justify-content:space-between}.steps-container{margin-top:20px}.step{margin-bottom:10px;padding:10px;background-color:#222;border:1px solid #444}.step-header{display:flex;align-items:center;justify-content:space-between}.step-content{margin-top:10px}.add-step-button{background-color:#008CBA;color:white;border:none;padding:10px;cursor:pointer;width:100%}.add-step-button:hover{background-color:#007B9E}</style></head><body><div class="container"><h1>密码大师</h1><div class="input-group"><label for="text">输入文本:</label><input type="text" id="text" placeholder="请输入文本"></div><div class="steps-container" id="steps-container"></div><button class="add-step-button" onclick="addStep()">+ 添加加密步骤</button><button onclick="startProcess('encrypt')">多重加密</button><button onclick="startProcess('decrypt')">多重解密</button><div class="result"><div class="result-group"><h3>结果:</h3><button class="icon-button" onclick="copyResult()">⎘</button></div><p id="result-text"></p></div></div><script>const instructionsMap={caesar:"凯撒密码: 输入一个整数作为偏移量（例如：3）。加密时，字母会按字母表顺序向后移动；解密时，字母会向前移动。",vigenere:"维吉尼亚密码: 输入一个密钥（例如：KEY）。加密时，使用密钥对文本进行多表替换；解密时，使用相同的密钥反向操作。",atbash:"阿特巴什密码: 不需要参数。加密和解密时，字母表会完全反转（A ↔ Z，B ↔ Y，C ↔ X，...）。"};function caesarCipher(text,shift,decrypt=false){shift=decrypt?-shift:shift;return text.replace(/[a-zA-Z]/g,function(c){const base=c<'a'?65:97;return String.fromCharCode((c.charCodeAt(0)-base+shift+26)%26+base);});}function vigenereCipher(text,key,decrypt=false){key=key.toUpperCase();let result='';for(let i=0,j=0;i<text.length;i++){const c=text[i];if(/[a-zA-Z]/.test(c)){const base=c<'a'?65:97;const keyChar=key[j%key.length].toUpperCase();const keyShift=keyChar.charCodeAt(0)-65;const shift=decrypt?-keyShift:keyShift;result+=String.fromCharCode((c.charCodeAt(0)-base+shift+26)%26+base);j++;}else{result+=c;}}return result;}function atbashCipher(text){return text.replace(/[a-zA-Z]/g,function(c){const base=c<'a'?65:97;return String.fromCharCode(25-(c.charCodeAt(0)-base)+base);});}function addStep(){const stepsContainer=document.getElementById('steps-container');const step=document.createElement('div');step.className='step';step.innerHTML=`<div class="step-header"><div class="method-group"><select class="step-method"><option value="caesar">凯撒密码</option><option value="vigenere">维吉尼亚密码</option><option value="atbash">阿特巴什密码</option></select><button class="icon-button" onclick="openInstructions(this)">?</button></div><button class="icon-button" onclick="removeStep(this)">×</button></div><div class="step-content"><input type="text" class="step-param" placeholder="请输入参数"></div>`;stepsContainer.appendChild(step);}function removeStep(button){const step=button.closest('.step');step.remove();}function openInstructions(button){const method=button.closest('.method-group').querySelector('.step-method').value;const instructions=instructionsMap[method];const newWindow=window.open();newWindow.document.write(`<html><head><title>使用说明</title><style>body{font-family:Arial,sans-serif;padding:20px;background-color:#222;color:white;font-size:24px}h1{font-size:36px}</style></head><body><h1>${method}使用说明</h1><p>${instructions}</p></body></html>`);newWindow.document.close();}function startProcess(type){const text=document.getElementById('text').value;const steps=document.querySelectorAll('.step');let result=text;steps.forEach(step=>{const method=step.querySelector('.step-method').value;const param=step.querySelector('.step-param').value;switch(method){case'caesar':result=caesarCipher(result,parseInt(param),type==='decrypt');break;case'vigenere':result=vigenereCipher(result,param,type==='decrypt');break;case'atbash':result=atbashCipher(result);break;}});document.getElementById('result-text').innerText=result;}function copyResult(){const resultText=document.getElementById('result-text').innerText;navigator.clipboard.writeText(resultText).then(()=>{alert('复制成功！');}).catch(()=>{alert('复制失败，请手动复制。');});}</script></body></html>